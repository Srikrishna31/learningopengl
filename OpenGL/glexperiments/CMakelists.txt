CMAKE_MINIMUM_REQUIRED(VERSION 3.5 FATAL_ERROR)

SET (PROJ_DIR glexperiments)
PROJECT(${PROJ_DIR})

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/${FREEGLUT_DIR}/include/)
SET(PROJECT_LINK_LIBS freeglut${PROJECT_SUFFFIX}${CMAKE_STATIC_LIBRARY_SUFFIX})
LINK_DIRECTORIES(${CMAKE_BINARY_DIR}/${FREEGLUT_DIR}/lib/${CMAKE_BUILD_TYPE}/)

SET(PROJECT_LINK_LIBS freeglut${PROJECT_SUFFIX}${CMAKE_SHARED_LIBRARY_SUFFIX})
LINK_DIRECTORIES(${CMAKE_BINARY_DIR}/${FREEGLUT_DIR}/bin/${CMAKE_BUILD_TYPE}/)

SET(HEADERS ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/DefaultRenderer.h
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/ISceneRenderer.h
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/SnowmanRenderer.h
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/TriangleRenderer.h)

SET(SOURCES ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/DefaultRenderer.cpp
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/glexperiments.cpp
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/SnowmanRenderer.cpp
            ${CMAKE_SOURCE_DIR}/${PROJ_DIR}/TriangleRenderer.cpp)

ADD_EXECUTABLE(${PROJECT_NAME} ${SOURCES} ${HEADERS})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${PROJECT_LINK_LIBS} )

#Copy the freeglutd.dll to the exe path for execution

#INSTALL(TARGETS ${PROJECT_NAME} DESTINATION ${PROJECT_BINARY_DIR})

ADD_CUSTOM_COMMAND(TARGET ${PROJECT_NAME} POST_BUILD 
                    COMMAND ${CMAKE_COMMAND} -E copy_if_different
                    "${CMAKE_BINARY_DIR}/${FREEGLUT_DIR}/bin/${CMAKE_BUILD_TYPE}/freeglut${PROJECT_SUFFIX}${CMAKE_SHARED_LIBRARY_SUFFIX}"
                    $<TARGET_FILE_DIR:${PROJECT_NAME}>)